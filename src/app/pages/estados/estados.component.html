<!--poner un texto de cargando-->
<app-carga *ngIf="cargando2 == false"></app-carga>

<div
  class="page-header"
  *ngIf="this.permidoscrud[0]?.read === 1 && cargando2 == true"
>
  <h4 class="page-title">CAMBIO DE ESTADO</h4>
  <ul class="breadcrumbs">
    <li class="nav-home">
      <a href="#">
        <i class="flaticon-home"></i>
      </a>
    </li>
    <li class="separator">
      <i class="flaticon-right-arrow"></i>
    </li>
    <li class="nav-item">
      <a href="#">Estado</a>
    </li>
    <li class="separator">
      <i class="flaticon-right-arrow"></i>
    </li>
    <li class="nav-item">
      <a href="#">cambio QR</a>
    </li>
  </ul>
</div>

<div class="row" *ngIf="this.permidoscrud[0]?.read === 1 && cargando2 == true">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Validación de datos</div>
        <div class="card-category">Descripción del bien</div>
      </div>
      <app-carga *ngIf="cargando == 0"></app-carga>
      <form
        id="exampleValidation"
        *ngIf="cargando == 1"
        (ngSubmit)="enviarFormulario()"
      >
        <div class="card-body">
          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Nombre</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.denominacion_bien }}"
                disabled
              />
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Código</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.codigo_patrimonial }}"
                id="codigo_patrimonial"
                name="codigo_patrimonial"
                disabled
              />
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Fecha Adq.</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.fecha_adquisicion }}"
                disabled
              />
            </div>
          </div>

          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Área</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.desc_area }}"
                *ngIf="!inputArea"
                id="area1"
                name="area2"
                disabled
              />

              <input
                class="form-control"
                *ngIf="inputArea"
                [(ngModel)]="inputArea"
                [ngModelOptions]="{ standalone: true }"
                id="area2"
                name="area2"
                disabled
              />
              <label *ngIf="inputArea" class="error texto"
                >Area Anterior: {{ descripcion.desc_area }} *</label
              >
            </div>
          </div>

          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Valor Neto</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.valor_neto }}"
                disabled
              />
            </div>
          </div>

          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Estado Actual</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                *ngIf="!inputValue"
                value="{{ descripcion.estado_bien }}"
                id="estado_bien1"
                name="estado_bien1"
                disabled
              />

              <input
                class="form-control"
                *ngIf="inputValue"
                [(ngModel)]="inputValue"
                [ngModelOptions]="{ standalone: true }"
                id="estado_bien2"
                name="estado_bien2"
                disabled
              />
              <label *ngIf="inputValue" class="error texto"
                >Estado Anterior: {{ descripcion.estado_bien }} *</label
              >
            </div>
          </div>

          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Condición</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                *ngIf="!inputValueC"
                value="{{ descripcion.condicion }}"
                id="condicion1"
                name="condicion1"
                disabled
              />

              <input
                class="form-control"
                *ngIf="inputValueC"
                [(ngModel)]="inputValueC"
                [ngModelOptions]="{ standalone: true }"
                id="condicion2"
                name="condicion2"
                disabled
              />
              <label *ngIf="inputValueC" class="error texto"
                >Condición Anterior: {{ descripcion.condicion }} *</label
              >
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"
              >Fecha Reg.</label
            >
            <div class="col-lg-8 col-md-9 col-sm-8 centrar">
              <input
                class="form-control"
                value="{{ descripcion.fecha_inventario }}"
                id="fecha1"
                name="fecha1"
                disabled
                *ngIf="!inputFecha"
              />
              <input
                class="form-control"
                *ngIf="inputFecha"
                [(ngModel)]="inputFecha"
                [ngModelOptions]="{ standalone: true }"
                id="fecha2"
                name="fecha2"
                disabled
              />
              <label *ngIf="inputFecha" class="error texto"
                >Fecha Pasada: {{ descripcion.fecha_inventario }} *</label
              >
            </div>
          </div>

          <div class="col-lg-12" *ngIf="this.permidoscrud[0]?.update === 1">
            <button class="btn btn-primary" type="submit">
              Confirmar Cambios
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Seleccionar (Estado y Condición)</h4>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-5 col-md-4">
            <div
              class="nav flex-column nav-pills nav-secondary"
              id="v-pills-tab"
              role="tablist"
              aria-orientation="vertical"
            >
              <a
                class="nav-link active"
                id="v-pills-home-tab"
                data-toggle="pill"
                href="#v-pills-home"
                role="tab"
                aria-controls="v-pills-home"
                aria-selected="true"
                >Estado</a
              >
              <a
                class="nav-link"
                id="v-pills-profile-tab"
                data-toggle="pill"
                href="#v-pills-profile"
                role="tab"
                aria-controls="v-pills-profile"
                aria-selected="false"
                >Condición</a
              >
              <a
                class="nav-link"
                id="v-pills-fecha-tab"
                data-toggle="pill"
                href="#v-pills-fecha"
                role="tab"
                aria-controls="v-pills-fecha"
                aria-selected="false"
                >Registro fecha</a
              >
              <a
                class="nav-link"
                id="v-pills-area-tab"
                data-toggle="pill"
                href="#v-pills-area"
                role="tab"
                aria-controls="v-pills-area"
                aria-selected="false"
                >Cambio Área</a
              >
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="tab-content" id="v-pills-tabContent">
              <div
                class="tab-pane fade show active"
                id="v-pills-home"
                role="tabpanel"
                aria-labelledby="v-pills-home-tab"
              >
                <div class="col-lg-10 col-md-9 col-sm-8">
                  <div class="card-title">Cambiar Estado:</div>
                  <select
                    class="form-control"
                    (change)="onSelectOption($event)"
                    required
                  >
                    <option value="" disabled selected>
                      Seleccionar Estado**
                    </option>
                    <option value="N">Nuevo(N)</option>
                    <option value="B">Bueno(B)</option>
                    <option value="R">Regular(R)</option>
                    <option value="M">Malo(M)</option>
                    <option value="X">X</option>
                    <option value="Y">Y</option>
                  </select>
                </div>
                <div class="mt-3">
                  <p>
                    <strong>N</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Nuevo
                  </p>
                  <p>
                    <strong>B</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Bueno
                  </p>
                  <p>
                    <strong>R</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Regular
                  </p>
                  <p>
                    <strong>M</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Malo
                  </p>
                  <p>
                    <strong>X</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Raee
                  </p>
                  <p>
                    <strong>Y</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Chatarra
                  </p>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="v-pills-profile"
                role="tabpanel"
                aria-labelledby="v-pills-profile-tab"
              >
                <div class="col-lg-10 col-md-9 col-sm-8">
                  <div class="card-title">Cambiar Estado:</div>
                  <select
                    class="form-control"
                    (change)="onSelectOptionC($event)"
                    required
                  >
                    <option value="" disabled selected>
                      Seleccionar Condición**
                    </option>
                    <option value="A">Alta(A)</option>
                    <option value="B">Baja(B)</option>
                  </select>
                </div>
                <div class="mt-3">
                  <p>
                    <strong>A</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Alta
                  </p>
                  <p>
                    <strong>B</strong
                    ><i class="fas fa-arrow-left mx-1"></i> Baja
                  </p>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="v-pills-fecha"
                role="tabpanel"
                aria-labelledby="v-pills-fecha-tab"
              >
                <div class="col-lg-10 col-md-9 col-sm-8">
                  <div class="card-title">Registrar fecha:</div>
                  <h5>{{ currentDateTime }}</h5>
                </div>
                <div class="col-lg-12">
                  <button
                    class="btn btn-primary"
                    type="submit"
                    (click)="onFecha($event)"
                  >
                    Confirmar fecha
                  </button>
                </div>
              </div>

              <div
                class="tab-pane fade"
                id="v-pills-area"
                role="tabpanel"
                aria-labelledby="v-pills-area-tab"
              >
                <div class="col-lg-10 col-md-9 col-sm-8">
                  <div class="card-title">Cambiar Area:</div>
                  <select
                    class="form-control"
                    (change)="onArea($event)"
                    required
                  >
                    <option value="" disabled selected>
                      Seleccionar Area**
                    </option>
                    <option value="{{ a.desc_area }}" *ngFor="let a of area">
                      {{ a.desc_area }}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
